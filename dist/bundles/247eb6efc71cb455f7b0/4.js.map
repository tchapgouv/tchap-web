{"version":3,"sources":["(webpack)/buildin/amd-define.js","src/async-components/views/dialogs/ExportE2eKeysDialog.js","matrix-react-sdk/node_modules/file-saver/FileSaver.js"],"names":["module","exports","Error","Matrix","MegolmExportEncryption","React","createClass","displayName","propTypes","matrixClient","PropTypes","instanceOf","MatrixClient","isRequired","onFinished","func","getInitialState","phase","errStr","componentWillMount","this","_unmounted","componentWillUnmount","_onPassphraseFormSubmit","ev","preventDefault","passphrase","refs","passphrase1","value","length","setState","_t","passphrase2","_startExport","resolve","then","props","exportRoomKeys","k","encryptMegolmKeyFile","f","blob","Blob","type","FileSaver","saveAs","catch","e","console","error","msg","friendlyText","_onCancelClick","render","BaseDialog","sdk","getComponent","disableForm","state","className","title","onSubmit","htmlFor","ref","id","autoFocus","size","disabled","onClick","view","navigator","test","userAgent","doc","document","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","setTimeout","revoke","file","revokeObjectURL","remove","auto_bom","String","fromCharCode","name","no_auto_bom","object_url","filesaver","force","dispatch_all","event_types","event","i","concat","listener","call","dispatch","split","readyState","INIT","createObjectURL","node","href","download","MouseEvent","dispatchEvent","DONE","FileReader","reader","onloadend","url","result","replace","open","location","undefined","readAsDataURL","fs_error","FS_proto","prototype","msSaveOrOpenBlob","abort","WRITING","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","window","content"],"mappings":"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","file":"bundles/247eb6efc71cb455f7b0/4.js","sourcesContent":["module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n","/*\nCopyright 2017 Vector Creations Ltd\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport FileSaver from 'file-saver';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { _t } from '../../../languageHandler';\n\nimport * as Matrix from 'matrix-js-sdk';\nimport * as MegolmExportEncryption from '../../../utils/MegolmExportEncryption';\nimport sdk from '../../../index';\n\nconst PHASE_EDIT = 1;\nconst PHASE_EXPORTING = 2;\n\nexport default React.createClass({\n    displayName: 'ExportE2eKeysDialog',\n\n    propTypes: {\n        matrixClient: PropTypes.instanceOf(Matrix.MatrixClient).isRequired,\n        onFinished: PropTypes.func.isRequired,\n    },\n\n    getInitialState: function() {\n        return {\n            phase: PHASE_EDIT,\n            errStr: null,\n        };\n    },\n\n    componentWillMount: function() {\n        this._unmounted = false;\n    },\n\n    componentWillUnmount: function() {\n        this._unmounted = true;\n    },\n\n    _onPassphraseFormSubmit: function(ev) {\n        ev.preventDefault();\n\n        const passphrase = this.refs.passphrase1.value;\n        if (passphrase.length < 8) {\n            this.setState({errStr: _t('Passphrase must be at least 8 character long')});\n            return false;\n        }\n        if (passphrase !== this.refs.passphrase2.value) {\n            this.setState({errStr: _t('Passphrases must match')});\n            return false;\n        }\n        if (!passphrase) {\n            this.setState({errStr: _t('Passphrase must not be empty')});\n            return false;\n        }\n\n        this._startExport(passphrase);\n        return false;\n    },\n\n    _startExport: function(passphrase) {\n        // extra Promise.resolve() to turn synchronous exceptions into\n        // asynchronous ones.\n        Promise.resolve().then(() => {\n            return this.props.matrixClient.exportRoomKeys();\n        }).then((k) => {\n            return MegolmExportEncryption.encryptMegolmKeyFile(\n                JSON.stringify(k), passphrase,\n            );\n        }).then((f) => {\n            const blob = new Blob([f], {\n                type: 'text/plain;charset=us-ascii',\n            });\n            FileSaver.saveAs(blob, 'tchap-keys.txt');\n            this.props.onFinished(true);\n        }).catch((e) => {\n            console.error(\"Error exporting e2e keys:\", e);\n            if (this._unmounted) {\n                return;\n            }\n            const msg = e.friendlyText || _t('Unknown error');\n            this.setState({\n                errStr: msg,\n                phase: PHASE_EDIT,\n            });\n        });\n\n        this.setState({\n            errStr: null,\n            phase: PHASE_EXPORTING,\n        });\n    },\n\n    _onCancelClick: function(ev) {\n        ev.preventDefault();\n        this.props.onFinished(false);\n        return false;\n    },\n\n    render: function() {\n        const BaseDialog = sdk.getComponent('views.dialogs.BaseDialog');\n\n        const disableForm = (this.state.phase === PHASE_EXPORTING);\n\n        return (\n            <BaseDialog className='mx_exportE2eKeysDialog'\n                onFinished={this.props.onFinished}\n                title={_t(\"Export room keys\")}\n            >\n                <form onSubmit={this._onPassphraseFormSubmit}>\n                    <div className=\"mx_Dialog_content\">\n                        <p>\n                            { _t(\n                                'This process allows you to export the keys for messages ' +\n                                'you have received in encrypted rooms to a local file. You ' +\n                                'will then be able to import the file into another Matrix ' +\n                                'client in the future, so that client will also be able to ' +\n                                'decrypt these messages.',\n                            ) }\n                        </p>\n                        <p>\n                            { _t(\n                                'The exported file will allow anyone who can read it to decrypt ' +\n                                'any encrypted messages that you can see, so you should be ' +\n                                'careful to keep it secure. To help with this, you should enter ' +\n                                'a passphrase below, which will be used to encrypt the exported ' +\n                                'data. It will only be possible to import the data by using the ' +\n                                'same passphrase.',\n                            ) }\n                        </p>\n                        <div className='error'>\n                            { this.state.errStr }\n                        </div>\n                        <div className='mx_E2eKeysDialog_inputTable'>\n                            <div className='mx_E2eKeysDialog_inputRow'>\n                                <div className='mx_E2eKeysDialog_inputLabel'>\n                                    <label htmlFor='passphrase1'>\n                                        { _t(\"Enter passphrase (8 characters minimum)\") }\n                                    </label>\n                                </div>\n                                <div className='mx_E2eKeysDialog_inputCell'>\n                                    <input ref='passphrase1' id='passphrase1'\n                                        autoFocus={true} size='64' type='password'\n                                        disabled={disableForm}\n                                    />\n                                </div>\n                            </div>\n                            <div className='mx_E2eKeysDialog_inputRow'>\n                                <div className='mx_E2eKeysDialog_inputLabel'>\n                                    <label htmlFor='passphrase2'>\n                                        { _t(\"Confirm passphrase\") }\n                                    </label>\n                                </div>\n                                <div className='mx_E2eKeysDialog_inputCell'>\n                                    <input ref='passphrase2' id='passphrase2'\n                                        size='64' type='password'\n                                        disabled={disableForm}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='mx_Dialog_buttons'>\n                        <input className='mx_Dialog_primary' type='submit' value={_t('Export')}\n                             disabled={disableForm}\n                        />\n                        <button onClick={this._onCancelClick} disabled={disableForm}>\n                            { _t(\"Cancel\") }\n                        </button>\n                    </div>\n                </form>\n            </BaseDialog>\n        );\n    },\n});\n","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n"],"sourceRoot":""}